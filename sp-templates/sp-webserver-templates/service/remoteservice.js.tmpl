/*
 * Automatically generated by SP Control panel
 * CRUD service.js for including the various packages required.
 */
<%
var validatoncount = 0,
	fieldscount =modelfields.length;
for( var fieldIndex in modelfields) {
	var modelfield = modelfields[fieldIndex];
  	if(modelfield.validation) {
		validatoncount++;
  	}
}
%>
var simpleportal = require("simpleportal");

var <%= name %>Service = new simpleportal.Service.CRUDService({
	collection:'<%= collection ? collection : name %>', 
	remoteservice:true,
	name:'<%= name %>', modify:<%= modify %>
	<%if(typeof title!='undefined' && title){%>,title:'<%= title %>'<%}%>
	<%if(typeof description!='undefined' && description){%>,description:'<%= description %>'<%}%>
	<%if(typeof primaryKey != 'undefined' && primaryKey){%>,"primaryKey":"<%= primaryKey %>"<%}%>
	<%if(typeof primaryKeyFields!='undefined' && primaryKeyFields){%>,primaryKeyFields:'<%= primaryKeyFields %>'<%}%>
	<%if(typeof userrole!='undefined'&&userrole&&userrole!=''){%>,userrole:'<%= userrole %>'<%}%>
	,model:{<%for( var fieldIndex in modelfields){var modelfield = modelfields[fieldIndex];if((typeof modelfield.defaultvalue == 'string' )){%>
		"<%= modelfield.field %>":"<%= modelfield.defaultvalue %>"<%}else{%>"<%= modelfield.field %>":""<%}%><%if(fieldIndex!=fieldscount-1){%>,<%}%><%}%>
	},validation:{<%for( var fieldIndex in modelfields){var modelfield = modelfields[fieldIndex];if(modelfield.validation){%>
		"<%= modelfield.field %>":"<%= modelfield.validation %>"<%if(fieldIndex<=validatoncount-1){%>,<%}%><%}}%>
	}
});

/*
 * Exporting the Sponsor service.
 */
module.exports = <%= name %>Service;