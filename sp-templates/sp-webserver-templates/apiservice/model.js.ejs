<%
var validationcount = 0,
	fieldscount = modelfields.length;

for( var fieldIndex in modelfields) {
  	var modelfield = modelfields[fieldIndex];
  	if(validation && validation[modelfield.field]) {
		validationcount++;
	}
}
%>

/*
 * Automatically generated by SP Control panel
 * Backbone model configuration specific to the Service - <%= name %>.
 */
/**
 * Backbone model <%= modelname %> 
 */
window.<%= modelname %> = Backbone.Model.extend({
	idAttribute:'_id',
	defaults: {
		<%for( var fieldIndex in modelfields){var modelfield = modelfields[fieldIndex];
			if((typeof modelfield.defaultvalue == 'string' )){%><%= modelfield.field %>:"<%= modelfield.defaultvalue %>"<%}else{%><%= modelfield.field %>:""<%}%><%if(fieldIndex!=fieldscount-1){%>,<%}%>
		<%}%>
	},
	modelName:'<%= modelname %>',
	url:function(uri){ 
		if(uri)
			return uri;
		else if(this.id)
			return '<%= apiurl %>/' + this.id;
		else
			return '<%= apiurl %>';
	}<%if(typeof configuration.modelsettings !== 'undefined' ){%>, settings:<%- JSON.stringify(configuration.modelsettings) %><%}%>
	<%if(typeof validation !== 'undefined' ){%>, validations:<%- JSON.stringify(validation) %><%}%>
});

/**
 * Backbone collection <%= modelname %>
 */
window.<%= modelname %>Collection = Backbone.Collection.extend({
    modelId:function(attrs){
		return attrs['_id'] ? attrs['_id'] : attrs['id'];
	},model: window.<%= modelname %>
});
 